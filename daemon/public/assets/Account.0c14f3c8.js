var E=(k,w,i)=>new Promise((D,c)=>{var m=_=>{try{r(i.next(_))}catch(d){c(d)}},e=_=>{try{r(i.throw(_))}catch(d){c(d)}},r=_=>_.done?D(_.value):Promise.resolve(_.value).then(m,e);r((i=i.apply(k,w)).next())});import{c as K,e as L,f as Q}from"./index.0f2f2e16.js";import{T as W}from"./TableAction.4151f0b4.js";import{P as X}from"./PlusOutlined.71de4daf.js";import{A as Z,_ as ee,a as ne}from"./ArchiveOutline.24497a89.js";import{d as te,z as oe,u as ue,r as x,b as ae,aw as _e,o as y,c as b,w as o,a as t,j as u,q as h,i as se,l as s,v as F,x as le,y as N,N as ie,ax as ce,m as re,n as de,cN as pe,a7 as me,cO as fe,aY as ge,aS as he,ad as Fe,s as we,cE as De,cF as ve,A as Ae}from"./index.3790d147.js";import{_ as Ee}from"./RadioButton.222114b3.js";import"./sortable.esm.1502e2e1.js";import"./useDesignSetting.e02d28c9.js";import"./propTypes.15d30787.js";import"./FormOutlined.88898c98.js";import"./componentSetting.f3f6bdde.js";import"./index.esm.ed31f38f.js";import"./DownOutlined.25d3f8ea.js";const ye=s(" \u65B0\u5EFA "),be=s("\u5220\u9664"),ke=s(" \u786E\u8BA4\u8981\u5220\u9664\u5F53\u524D\u7684\u56FE\u6807icon\u5417? "),Ce={style:{"margin-bottom":"12px"}},Be=s(" \u70B9\u51FB\u6216\u8005\u62D6\u52A8\u6587\u4EF6\u5230\u8BE5\u533A\u57DF\u6765\u4E0A\u4F20 "),xe=s("\u4E0D\u663E\u793A"),Ne=s("\u663E\u793A"),Te=s("\u4E0D\u663E\u793A"),Se=s("\u663E\u793A"),Ue=s("\u5173\u95ED"),$e=s("\u4FDD\u5B58"),Le=te({setup(k){const w=oe(),i=ue(),D=[{title:"id",key:"id",width:50},{title:"\u540D\u79F0",key:"name",width:150},{title:"\u56FE\u6807",key:"icon",width:50,render(n){return F(le,{size:48,src:n.icon})}},{title:"\u662F\u5426\u663E\u793A\u8D26\u53F7",key:"show_account",width:80,render(n){return F(N,{type:n.show_account==1?"success":"error"},{default:()=>n.show_account==1?"\u663E\u793A":"\u9690\u85CF"})}},{title:"\u662F\u5426\u663E\u793A\u56FE\u7247",key:"show_image",width:80,render(n){return F(N,{type:n.show_image==1?"success":"error"},{default:()=>n.show_image==1?"\u663E\u793A":"\u9690\u85CF"})}},{title:"\u987A\u5E8F",key:"account_order",width:80},{title:"\u64CD\u4F5C",key:"actions",width:80,render(n){return F(W,{style:"button",actions:[{label:"\u5220\u9664",icon:"ic:outline-delete-outline",onClick:q.bind(null,n)},{label:"\u7F16\u8F91",onClick:$.bind(null,n)}]})}}],c=x(null),m=x([]),e=ae({activeDrawer:!1,loading:!1,title:"\u8D26\u53F7\u7C7B\u522B\u7BA1\u7406",id:0,name:null,icon:null,icon_path:null,show_account:1,show_image:1,account_order:255}),r={name:{required:!0,trigger:["blur","input"],message:"\u8BF7\u8F93\u5165\u540D\u79F0"},icon:{required:!0,trigger:"change",message:"\u8BF7\u4E0A\u4F20\u8D26\u53F7icon"}},_=()=>E(this,null,function*(){K().then(n=>{m.value=n.data})}),d=()=>{v(),e.activeDrawer=!0},v=()=>{e.activeDrawer=!1,e.loading=!1,e.id=0,e.name=null,e.icon=null,e.icon_path=null,e.show_account=1,e.show_image=1,e.account_order=255},T=()=>{v()},S=({event:n})=>{if(n&&n.target.status==200){const a=JSON.parse(n.target.response);e.icon=a.url,e.icon_path=a.file_path}},U=()=>{e.icon=null,e.icon_path=null},$=n=>{console.log(n),e.id=n.id,e.name=n.name,e.icon=n.icon,e.icon_path=n.icon_path,e.show_account=n.show_account,e.show_image=n.show_image,e.account_order=n.account_order,e.activeDrawer=!0},q=n=>{w.warning({title:"\u8B66\u544A",content:"\u786E\u5B9A\u8981\u5220\u9664\u5F53\u524D\u8D26\u53F7\uFF0C\u8BE5\u64CD\u4F5C\u65E0\u6CD5\u64A4\u9500\uFF1F",positiveText:"\u786E\u5B9A",negativeText:"\u53D6\u6D88",onPositiveClick:()=>{L(n.id).then(()=>_())}})},z=n=>{var a;n.preventDefault(),(a=c.value)==null||a.validate(f=>{if(f)i.error("\u9A8C\u8BC1\u5931\u8D25");else{const A={id:e.id,name:e.name,icon:e.icon_path,show_account:e.show_account,show_image:e.show_image,account_order:e.account_order};e.loading=!0,Q(A).then(()=>{v(),_()}).finally(()=>{e.loading=!1})}})};return _e(()=>E(this,null,function*(){_()})),(n,a)=>{const f=ie,A=ce,I=re,p=de,P=pe,O=ee,C=me,R=ne,V=fe,j=ge,g=Ee,B=he,M=Fe,J=we,Y=De,G=ve,H=Ae;return y(),b(H,{bordered:!1,class:"proCard"},{default:o(()=>[t(u(h),{type:"primary",onClick:d},{default:o(()=>[t(f,null,{default:o(()=>[t(u(X))]),_:1}),ye]),_:1}),t(A,{columns:D,data:m.value,bordered:!1},null,8,["data"]),t(G,{show:u(e).activeDrawer,"onUpdate:show":a[4]||(a[4]=l=>u(e).activeDrawer=l),width:"50%","close-on-esc":!1,"mask-closable":!1},{default:o(()=>[t(Y,{title:u(e).title},{footer:o(()=>[t(C,null,{default:o(()=>[t(u(h),{onClick:T},{default:o(()=>[Ue]),_:1}),t(u(h),{type:"info",loading:u(e).loading,onClick:z},{default:o(()=>[$e]),_:1},8,["loading"])]),_:1})]),default:o(()=>[t(J,{ref_key:"formRef",ref:c,model:u(e),"label-placement":"left","label-width":"auto","require-mark-placement":"right-hanging",rules:r},{default:o(()=>[t(p,{label:"\u8D26\u53F7\u540D\u79F0",path:"name"},{default:o(()=>[t(I,{value:u(e).name,"onUpdate:value":a[0]||(a[0]=l=>u(e).name=l),placeholder:"\u8BF7\u8F93\u5165\u8D26\u53F7\u540D\u79F0"},null,8,["value"])]),_:1}),t(p,{label:"\u56FE\u6807icon",path:"icon"},{default:o(()=>[u(e).icon&&u(e).icon_path?(y(),b(C,{key:0,vertical:""},{default:o(()=>[t(P,{src:u(e).icon,width:"100"},null,8,["src"]),t(O,{"show-icon":!1,onPositiveClick:U},{trigger:o(()=>[t(u(h),null,{default:o(()=>[be]),_:1})]),default:o(()=>[ke]),_:1})]),_:1})):(y(),b(j,{key:1,"directory-dnd":"",action:"/api/admin/upload",accept:"image/png, image/jpeg",name:"image",onFinish:S},{default:o(()=>[t(V,null,{default:o(()=>[se("div",Ce,[t(f,{size:"48",depth:3},{default:o(()=>[t(u(Z))]),_:1})]),t(R,{style:{"font-size":"16px"}},{default:o(()=>[Be]),_:1})]),_:1})]),_:1}))]),_:1}),t(p,{label:"\u662F\u5426\u663E\u793A\u8D26\u53F7"},{default:o(()=>[t(B,{value:u(e).show_account,"onUpdate:value":a[1]||(a[1]=l=>u(e).show_account=l)},{default:o(()=>[t(g,{value:0},{default:o(()=>[xe]),_:1}),t(g,{value:1},{default:o(()=>[Ne]),_:1})]),_:1},8,["value"])]),_:1}),t(p,{label:"\u662F\u5426\u663E\u793A\u56FE\u7247"},{default:o(()=>[t(B,{value:u(e).show_image,"onUpdate:value":a[2]||(a[2]=l=>u(e).show_image=l)},{default:o(()=>[t(g,{value:0},{default:o(()=>[Te]),_:1}),t(g,{value:1},{default:o(()=>[Se]),_:1})]),_:1},8,["value"])]),_:1}),t(p,{label:"\u987A\u5E8F"},{default:o(()=>[t(M,{value:u(e).account_order,"onUpdate:value":a[3]||(a[3]=l=>u(e).account_order=l),min:1,max:65535},null,8,["value"])]),_:1})]),_:1},8,["model"])]),_:1},8,["title"])]),_:1},8,["show"])]),_:1})}}});export{Le as default};
