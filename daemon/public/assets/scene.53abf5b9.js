import{f as x,b as q}from"./workplace.6dc847cd.js";import{d as L,u as N,r as F,b as S,aw as U,o as _,h as i,a as n,w as a,j as l,i as u,aD as V,aA as M,l as d,q as R,cG as j,m as G,n as T,s as $,a7 as z,cE as H,cF as I,as as c}from"./index.3790d147.js";const J=d("\u6DFB\u52A0"),K=u("thead",null,[u("tr",null,[u("th",null,"id"),u("th",null,"name"),u("th",null,"info")])],-1),O=d("\u5173\u95ED"),P=d("\u4FDD\u5B58"),Y=L({setup(Q){const h=N(),m=F([]),f=F(null),e=S({activeDrawer:!1,loading:!1,name:null,info:null}),w={name:{required:!0,message:"\u8BF7\u8F93\u5165name",trigger:["blur","input"]}},p=()=>{e.activeDrawer=!1,e.loading=!1,e.name=null,e.info=null},b=()=>{p()},B=r=>{var t;r.preventDefault(),(t=f.value)==null||t.validate(s=>{s?h.error("\u9A8C\u8BC1\u5931\u8D25"):(e.loading=!0,x({name:e.name,info:e.info}).then(()=>{g(),p()}).catch(()=>{e.loading=!1}))})},g=()=>{q().then(r=>{m.value=r.data})};return U(()=>{g()}),(r,t)=>{const s=R,k=j,v=G,D=T,C=$,A=z,E=H,y=I;return _(),i("div",null,[n(s,{type:"success",onClick:t[0]||(t[0]=o=>l(e).activeDrawer=!0)},{default:a(()=>[J]),_:1}),n(k,{bordered:!1,"single-line":!1},{default:a(()=>[K,u("tbody",null,[(_(!0),i(V,null,M(m.value,o=>(_(),i("tr",null,[u("td",null,c(o.id),1),u("td",null,c(o.name),1),u("td",null,c(o.info),1)]))),256))])]),_:1}),n(y,{show:l(e).activeDrawer,"onUpdate:show":t[3]||(t[3]=o=>l(e).activeDrawer=o),width:"50%","close-on-esc":!1,"mask-closable":!1},{default:a(()=>[n(E,{title:"\u6DFB\u52A0scene"},{footer:a(()=>[n(A,null,{default:a(()=>[n(s,{onClick:b},{default:a(()=>[O]),_:1}),n(s,{type:"info",loading:l(e).loading,onClick:B},{default:a(()=>[P]),_:1},8,["loading"])]),_:1})]),default:a(()=>[n(C,{ref_key:"formRef",ref:f,model:l(e),"label-placement":"left","label-width":"auto","require-mark-placement":"right-hanging",rules:w},{default:a(()=>[n(D,{label:"\u540D\u79F0",path:"name"},{default:a(()=>[n(v,{value:l(e).name,"onUpdate:value":t[1]||(t[1]=o=>l(e).name=o),placeholder:"\u8BF7\u8F93\u5165\u540D\u79F0"},null,8,["value"])]),_:1}),n(D,{label:"\u4FE1\u606F"},{default:a(()=>[n(v,{value:l(e).info,"onUpdate:value":t[2]||(t[2]=o=>l(e).info=o),placeholder:"\u8BF7\u8F93\u5165\u673A\u5668\u4EBA\u4FE1\u606F"},null,8,["value"])]),_:1})]),_:1},8,["model"])]),_:1})]),_:1},8,["show"])])}}});export{Y as default};
