var w=(_,h,r)=>new Promise((v,d)=>{var p=s=>{try{c(r.next(s))}catch(m){d(m)}},e=s=>{try{c(r.throw(s))}catch(m){d(m)}},c=s=>s.done?v(s.value):Promise.resolve(s.value).then(p,e);c((r=r.apply(_,h)).next())});import{a as j}from"./index.0f2f2e16.js";import{aF as A,d as z,z as I,u as L,r as B,b as $,aw as G,o as H,c as J,w as u,a as t,j as a,q as E,l as i,v as b,y as k,N as K,ax as Q,m as W,n as X,aS as Y,ad as Z,s as ee,a7 as te,cE as ne,cF as ue,A as ae}from"./index.3790d147.js";import{T as oe}from"./TableAction.4151f0b4.js";import{P as se}from"./PlusOutlined.71de4daf.js";import{_ as le}from"./RadioButton.222114b3.js";import"./sortable.esm.1502e2e1.js";import"./useDesignSetting.e02d28c9.js";import"./propTypes.15d30787.js";import"./FormOutlined.88898c98.js";import"./componentSetting.f3f6bdde.js";import"./index.esm.ed31f38f.js";import"./DownOutlined.25d3f8ea.js";function ie(_){return A.request({url:"/tag",method:"POST",data:_})}function _e(_){return A.request({url:"/tag/"+_,method:"DELETE"})}const re=i(" \u65B0\u5EFA "),de=i("\u5426"),ce=i("\u662F"),me=i("\u663E\u793A"),pe=i("\u9690\u85CF"),fe=i("\u5173\u95ED"),ge=i("\u4FDD\u5B58"),xe=z({setup(_){const h=[{title:"id",key:"id",width:50},{title:"\u540D\u79F0",key:"name",width:150},{title:"\u662F\u5426\u5E73\u53F0\u6807\u7B7E",key:"is_sys",width:80,render(n){return b(k,{type:n.is_sys?"success":"error"},{default:()=>n.is_sys?"\u662F":"\u5426"})}},{title:"\u662F\u5426\u9690\u85CF",key:"is_hide",width:80,render(n){return b(k,{type:n.is_hide?"error":"success"},{default:()=>n.is_hide?"\u9690\u85CF":"\u663E\u793A"})}},{title:"\u987A\u5E8F",key:"tag_order",width:80},{title:"\u64CD\u4F5C",key:"actions",width:100,render(n){return b(oe,{style:"button",actions:[{label:"\u5220\u9664",icon:"ic:outline-delete-outline",onClick:q.bind(null,n)},{label:"\u7F16\u8F91",onClick:x.bind(null,n)}]})}}],r=I(),v=L(),d=B(null),p=B([]),e=$({activeDrawer:!1,loading:!1,title:"\u6807\u7B7E\u7BA1\u7406",id:0,name:null,is_hide:0,is_sys:0,tag_order:255}),c={name:{required:!0,trigger:["blur","input"],message:"\u8BF7\u8F93\u5165\u540D\u79F0"}},s=()=>w(this,null,function*(){j().then(n=>{p.value=n.tags})}),m=()=>{f(),e.activeDrawer=!0},f=()=>{e.activeDrawer=!1,e.loading=!1,e.activeDrawer=!1,e.loading=!1,e.id=0,e.name=null,e.is_hide=0,e.is_sys=0,e.tag_order=255},T=()=>{f()},x=n=>{f(),e.id=n.id,e.name=n.name,e.is_hide=n.is_hide?1:0,e.is_sys=n.is_sys?1:0,e.tag_order=n.tag_order,e.activeDrawer=!0},q=n=>{r.warning({title:"\u8B66\u544A",content:"\u786E\u5B9A\u8981\u5220\u9664\u5F53\u524D\u6570\u636E\uFF0C\u8BE5\u64CD\u4F5C\u65E0\u6CD5\u64A4\u9500\uFF1F",positiveText:"\u786E\u5B9A",negativeText:"\u53D6\u6D88",onPositiveClick:()=>{_e(n.id).then(()=>s())}})},N=n=>{var o;n.preventDefault(),(o=d.value)==null||o.validate(y=>{if(y)v.error("\u9A8C\u8BC1\u5931\u8D25");else{const D={id:e.id,name:e.name,is_hide:e.is_hide,is_sys:e.is_sys,tag_order:e.tag_order};e.loading=!0,ie(D).then(()=>{f(),s()}).finally(()=>{e.loading=!1})}})};return G(()=>w(this,null,function*(){s()})),(n,o)=>{const y=K,D=Q,U=W,g=X,F=le,C=Y,P=Z,S=ee,M=te,O=ne,R=ue,V=ae;return H(),J(V,{bordered:!1,class:"proCard"},{default:u(()=>[t(a(E),{type:"primary",onClick:m},{default:u(()=>[t(y,null,{default:u(()=>[t(a(se))]),_:1}),re]),_:1}),t(D,{columns:h,data:p.value,bordered:!1},null,8,["data"]),t(R,{show:a(e).activeDrawer,"onUpdate:show":o[4]||(o[4]=l=>a(e).activeDrawer=l),width:"50%","close-on-esc":!1,"mask-closable":!1},{default:u(()=>[t(O,{title:a(e).title},{footer:u(()=>[t(M,null,{default:u(()=>[t(a(E),{onClick:T},{default:u(()=>[fe]),_:1}),t(a(E),{type:"info",loading:a(e).loading,onClick:N},{default:u(()=>[ge]),_:1},8,["loading"])]),_:1})]),default:u(()=>[t(S,{ref_key:"formRef",ref:d,model:a(e),"label-placement":"left","label-width":"auto","require-mark-placement":"right-hanging",rules:c},{default:u(()=>[t(g,{label:"\u6807\u7B7E\u540D\u79F0",path:"name"},{default:u(()=>[t(U,{value:a(e).name,"onUpdate:value":o[0]||(o[0]=l=>a(e).name=l),placeholder:"\u8BF7\u8F93\u5165\u6807\u7B7E\u540D\u79F0"},null,8,["value"])]),_:1}),t(g,{label:"\u662F\u5426\u5E73\u53F0\u6807\u7B7E	"},{default:u(()=>[t(C,{value:a(e).is_sys,"onUpdate:value":o[1]||(o[1]=l=>a(e).is_sys=l)},{default:u(()=>[t(F,{value:0},{default:u(()=>[de]),_:1}),t(F,{value:1},{default:u(()=>[ce]),_:1})]),_:1},8,["value"])]),_:1}),t(g,{label:"\u662F\u5426\u9690\u85CF"},{default:u(()=>[t(C,{value:a(e).is_hide,"onUpdate:value":o[2]||(o[2]=l=>a(e).is_hide=l)},{default:u(()=>[t(F,{value:0},{default:u(()=>[me]),_:1}),t(F,{value:1},{default:u(()=>[pe]),_:1})]),_:1},8,["value"])]),_:1}),t(g,{label:"\u987A\u5E8F"},{default:u(()=>[t(P,{value:a(e).tag_order,"onUpdate:value":o[3]||(o[3]=l=>a(e).tag_order=l),min:1,max:65535},null,8,["value"])]),_:1})]),_:1},8,["model"])]),_:1},8,["title"])]),_:1},8,["show"])]),_:1})}}});export{xe as default};
