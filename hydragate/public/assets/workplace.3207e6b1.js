var w=(p,C,u)=>new Promise((i,h)=>{var F=l=>{try{v(u.next(l))}catch(m){h(m)}},f=l=>{try{v(u.throw(l))}catch(m){h(m)}},v=l=>l.done?i(l.value):Promise.resolve(l.value).then(F,f);v((u=u.apply(p,C)).next())});import{g as Z,a as ee,b as te,c as se,d as ae,p as ne,s as oe,e as ue,f as le,h as I}from"./workplace.ce2fc7ad.js";import{_ as ce,d as _e,u as re,r as c,b as ie,aw as de,aL as pe,o as k,h as fe,a as s,w as e,i as r,j as o,as as R,c as E,at as ve,l as d,p as me,k as ge,x as ke,aT as he,aU as be,q as Ee,a7 as Fe,A as De,cE as we,ae as Ce,n as Be,s as ye,cF as xe,cG as Se,a$ as Te}from"./index.86ccf7fc.js";var Ae="/assets/schoolboy.9f04cdf7.png";const q=p=>(me("data-v-c183a280"),p=p(),ge(),p),Ne=d(" \u6B63\u5728\u52A0\u8F7D\u4E2D... "),Ue={class:"n-layout-page-header"},Ie={class:"flex items-center"},Re=q(()=>r("div",null,[r("p",{class:"px-4 text-xl"},"\u6B22\u8FCE\u767B\u5F55\u6570\u636E\u91C7\u96C6\u7CFB\u7EDF")],-1)),qe={class:"flex justify-end w-full"},Le={class:"flex flex-1 flex-col justify-center text-right"},Ve=q(()=>r("span",{class:"text-secondary"},"\u5F53\u524D\u9879\u76EE",-1)),je={class:"text-2xl"},Me=d(" \u5F00\u542F\u670D\u52A1 "),Oe=d(" \u5173\u95ED\u670D\u52A1 "),ze=d(" \u8BBE\u7F6E\u91C7\u96C6\u4EFB\u52A1 "),$e=d(" \u7ED3\u675F\u91C7\u96C6\u4EFB\u52A1 "),Ge=d("\u5173\u95ED"),Pe=d("\u4FDD\u5B58"),He=_e({setup(p){const C=re(),u=c(!1),i=c(!1),h=c(!1),F=c(""),f=c(!1),v=c([]),l=c([]),m=c([]),T=c(null),b=c(!1),a=ie({hasTask:!1,activeDrawer:!1,loading:!1,robot:null,scene:null,task:null}),L={robot:{required:!0,message:"\u8BF7\u9009\u62E9robot",trigger:"change"},scene:{required:!0,message:"\u8BF7\u9009\u62E9scene",trigger:"change"},task:{required:!0,message:"\u8BF7\u9009\u62E9task",trigger:"change"}};let A;const V=()=>{A=setInterval(()=>{ee().then(n=>{h.value=n.is_running,F.value=n.task_name,f.value!=n.result&&(f.value=n.result),n.robot_id>0&&n.scene_id>0&&n.task_id>0?b.value=!0:b.value=!1})},1e3)},j=()=>{te().then(n=>{v.value=n.data.map(t=>({label:t.name,value:t.robot_id+""}))}),se().then(n=>{l.value=n.data.map(t=>({label:t.name,value:t.id+""}))}),ae().then(n=>{m.value=n.data.map(t=>({label:t.name,value:t.id+""}))}),B(),a.activeDrawer=!0},B=()=>{a.activeDrawer=!1,a.loading=!1,a.robot=null,a.scene=null,a.task=null},M=()=>{B()},O=n=>{var t;n.preventDefault(),(t=T.value)==null||t.validate(y=>{y?C.error("\u9A8C\u8BC1\u5931\u8D25"):(a.loading=!0,ne({robot_id:~~a.robot,scene_id:~~a.robot,task_id:~~a.task}).then(()=>{B(),b.value=!0}))})},z=()=>w(this,null,function*(){u.value=!0,oe().then(()=>{i.value=!0,u.value=!1})}),$=()=>w(this,null,function*(){u.value=!0,ue().then(()=>{i.value=!1,u.value=!1})}),G=()=>w(this,null,function*(){le().then(()=>{b.value=!1})}),P=()=>{I({result:!0})},H=()=>{I({result:!1})};return de(()=>{V(),Z().then(()=>{i.value=!0}).catch(()=>{i.value=!1})}),pe(()=>{clearInterval(A)}),(n,t)=>{const y=ke,N=he,J=be,g=Ee,D=Fe,U=De,K=we,x=Ce,S=Be,Q=ye,W=xe,X=Se,Y=Te;return k(),fe("div",null,[s(K,{show:u.value},{description:e(()=>[Ne]),default:e(()=>[r("div",Ue,[s(U,{bordered:!1,title:"\u5DE5\u4F5C\u53F0"},{default:e(()=>[s(J,{cols:"2 s:1 m:1 l:2 xl:2 2xl:2",responsive:"screen"},{default:e(()=>[s(N,null,{default:e(()=>[r("div",Ie,[r("div",null,[s(y,{circle:"",size:64,src:o(Ae)},null,8,["src"])]),Re])]),_:1}),s(N,null,{default:e(()=>[r("div",qe,[r("div",Le,[Ve,r("span",je,R(h.value?"\u8FDB\u884C\u4E2D":"\u65E0")+" "+R(F.value),1)])])]),_:1})]),_:1}),s(U,{bordered:!1},{default:e(()=>[s(D,{vertical:""},{default:e(()=>[s(D,null,{default:e(()=>[i.value?(k(),E(g,{key:1,type:"error",onClick:$},{default:e(()=>[Oe]),_:1})):(k(),E(g,{key:0,type:"warning",onClick:z},{default:e(()=>[Me]),_:1}))]),_:1}),i.value?(k(),E(D,{key:0},{default:e(()=>[b.value?(k(),E(g,{key:1,type:"warning",secondary:"",onClick:G},{default:e(()=>[$e]),_:1})):(k(),E(g,{key:0,type:"info",secondary:"",onClick:j},{default:e(()=>[ze]),_:1}))]),_:1})):ve("",!0)]),_:1})]),_:1})]),_:1})])]),_:1},8,["show"]),s(X,{show:o(a).activeDrawer,"onUpdate:show":t[3]||(t[3]=_=>o(a).activeDrawer=_),width:"50%","close-on-esc":!1,"mask-closable":!1},{default:e(()=>[s(W,{title:"\u8BBE\u7F6E\u4EFB\u52A1"},{footer:e(()=>[s(D,null,{default:e(()=>[s(g,{onClick:M},{default:e(()=>[Ge]),_:1}),s(g,{type:"info",loading:o(a).loading,onClick:O},{default:e(()=>[Pe]),_:1},8,["loading"])]),_:1})]),default:e(()=>[s(Q,{ref_key:"formRef",ref:T,model:o(a),"label-placement":"left","label-width":"auto","require-mark-placement":"right-hanging",rules:L},{default:e(()=>[s(S,{label:"robot",path:"robot"},{default:e(()=>[s(x,{value:o(a).robot,"onUpdate:value":t[0]||(t[0]=_=>o(a).robot=_),placeholder:"\u8BF7\u9009\u62E9robot",options:v.value},null,8,["value","options"])]),_:1}),s(S,{label:"scene",path:"scene"},{default:e(()=>[s(x,{value:o(a).scene,"onUpdate:value":t[1]||(t[1]=_=>o(a).scene=_),placeholder:"\u8BF7\u9009\u62E9scene",options:l.value},null,8,["value","options"])]),_:1}),s(S,{label:"task",path:"task"},{default:e(()=>[s(x,{value:o(a).task,"onUpdate:value":t[2]||(t[2]=_=>o(a).task=_),placeholder:"\u8BF7\u9009\u62E9task",options:m.value},null,8,["value","options"])]),_:1})]),_:1},8,["model"])]),_:1})]),_:1},8,["show"]),s(Y,{show:f.value,"onUpdate:show":t[4]||(t[4]=_=>f.value=_),"mask-closable":!1,"z-index":1e5,preset:"dialog",title:"\u8BBE\u7F6E\u6570\u636E\u7ED3\u679C",content:"\u8BF7\u9009\u62E9\u5F53\u524D\u7684\u91C7\u96C6\u7EC4\u7684\u6210\u529F\u72B6\u6001","positive-text":"\u6210\u529F","negative-text":"\u5931\u8D25",onPositiveClick:P,onNegativeClick:H},null,8,["show"])])}}});var We=ce(He,[["__scopeId","data-v-c183a280"]]);export{We as default};
