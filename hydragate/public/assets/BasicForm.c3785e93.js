var re=Object.defineProperty,ie=Object.defineProperties;var ce=Object.getOwnPropertyDescriptors;var X=Object.getOwnPropertySymbols;var de=Object.prototype.hasOwnProperty,fe=Object.prototype.propertyIsEnumerable;var H=(e,s,o)=>s in e?re(e,s,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[s]=o,v=(e,s)=>{for(var o in s||(s={}))de.call(s,o)&&H(e,o,s[o]);if(X)for(var o of X(s))fe.call(s,o)&&H(e,o,s[o]);return e},J=(e,s)=>ie(e,ce(s));var C=(e,s,o)=>new Promise((O,d)=>{var g=n=>{try{r(o.next(n))}catch(_){d(_)}},f=n=>{try{r(o.throw(n))}catch(_){d(_)}},r=n=>n.done?O(n.value):Promise.resolve(n.value).then(g,f);r((o=o.apply(e,s)).next())});import{d as ee,o as c,c as m,a as B,j as a,an as W,a4 as K,aM as pe,am as te,aN as Y,al as _e,r as h,b as me,a0 as N,ac as ge,aw as be,_ as ye,X as $,w as u,h as G,aA as Q,au as z,az as ve,l as V,as as j,aO as Z,ay as x,aD as L,aP as Be,at as R,aB as Oe,aC as ke,aQ as we,N as Pe,a8 as Fe,a6 as Se,a7 as Ce,aa as he,aR as Ne,aS as Ve,n as je,aT as Me,q as De,aU as Ee,s as Ue}from"./index.cfaa09d6.js";import{s as ze,p as A,Q as Re}from"./propTypes.6075aa52.js";import{D as Te}from"./DownOutlined.be9dd1d2.js";const Ae={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 1024 1024"},Ie=B("path",{d:"M890.5 755.3L537.9 269.2c-12.8-17.6-39-17.6-51.7 0L133.5 755.3A8 8 0 0 0 140 768h75c5.1 0 9.9-2.5 12.9-6.6L512 369.8l284.1 391.6c3 4.1 7.8 6.6 12.9 6.6h75c6.5 0 10.3-7.4 6.5-12.7z",fill:"currentColor"},null,-1);var $e=ee({name:"UpOutlined",render:function(s,o){return c(),m("svg",Ae,[Ie])}});function Ge(e){return e==="NInput"?"\u8BF7\u8F93\u5165":["NPicker","NSelect","NCheckbox","NRadio","NSwitch","NDatePicker","NTimePicker"].includes(e)?"\u8BF7\u9009\u62E9":""}function Qe({emit:e,getProps:s,formModel:o,getSchema:O,formElRef:d,defaultFormModel:g,loadingSub:f,handleFormValues:r}){function n(){return C(this,null,function*(){var l;return(l=a(d))==null?void 0:l.validate()})}function _(l){return C(this,null,function*(){l&&l.preventDefault(),f.value=!0;const{submitFunc:b}=a(s);if(b&&W(b)){yield b();return}if(!!a(d))try{return yield n(),f.value=!1,e("submit",o),!0}catch(P){return f.value=!1,!1}})}function k(){return C(this,null,function*(){var l;yield(l=a(d))==null?void 0:l.restoreValidation()})}function M(){return C(this,null,function*(){const{resetFunc:l,submitOnReset:b}=a(s);if(l&&W(l)&&(yield l()),!a(d))return;Object.keys(o).forEach(w=>{o[w]=a(g)[w]||null}),yield k();const P=r(K(a(o)));e("reset",P),b&&(yield _())})}function D(){return a(d)?r(K(a(o))):{}}function E(l){return C(this,null,function*(){const b=a(O).map(y=>y.field).filter(Boolean);Object.keys(l).forEach(y=>{const P=l[y];b.includes(y)&&(o[y]=P)})})}return{handleSubmit:_,validate:n,resetFields:M,getFieldsValue:D,clearValidate:k,setFieldsValue:E}}function Le({defaultFormModel:e,getSchema:s,formModel:o}){function O(g){if(!pe(g))return{};const f={};for(const r of Object.entries(g)){let[,n]=r;const[_]=r;!_||te(n)&&n.length===0||W(n)||Y(n)||(_e(n)&&(n=n.trim()),ze(f,_,n))}return f}function d(){const g=a(s),f={};g.forEach(r=>{const{defaultValue:n}=r;Y(n)||(f[r.field]=n,o[r.field]=n)}),e.value=f}return{handleFormValues:O,initDefault:d}}const We={labelWidth:{type:[Number,String],default:80},schemas:{type:[Array],default:()=>[]},layout:{type:String,default:"inline"},inline:{type:Boolean,default:!1},size:{type:String,default:"medium"},labelPlacement:{type:String,default:"left"},isFull:{type:Boolean,default:!0},showActionButtonGroup:A.bool.def(!0),showResetButton:A.bool.def(!0),resetButtonOptions:Object,showSubmitButton:A.bool.def(!0),submitButtonOptions:Object,showAdvancedButton:A.bool.def(!0),submitButtonText:{type:String,default:"\u67E5\u8BE2"},resetButtonText:{type:String,default:"\u91CD\u7F6E"},gridProps:Object,giProps:Object,baseGridStyle:{type:Object},collapsed:{type:Boolean,default:!1},collapsedRows:{type:Number,default:1}};const qe=ee({name:"BasicUpload",components:{DownOutlined:Te,UpOutlined:$e,QuestionCircleOutlined:Re},props:v({},We),emits:["reset","submit","register"],setup(e,{emit:s,attrs:o}){const O=h({}),d=me({}),g=h({}),f=h(null),r=h(null),n=h(!0),_=h(!1),k=h(!1),M=N(()=>Object.assign({size:e.size,type:"primary"},e.submitButtonOptions)),D=N(()=>Object.assign({size:e.size,type:"default"},e.resetButtonOptions));function E(i){var S;const F=(S=i.componentProps)!=null?S:{},U=i.component;return v({clearable:!0,placeholder:Ge(a(U))},F)}const l=N(()=>{const i=v(v({},e),a(g)),F={rules:{}};return(i.schemas||[]).forEach(S=>{S.rules&&te(S.rules)&&(F.rules[S.field]=S.rules)}),v(v({},i),a(F))}),b=N(()=>{const{layout:i}=a(l);return i==="inline"}),y=N(()=>{const{gridProps:i}=a(l);return J(v({},i),{collapsed:b.value?n.value:!1,responsive:"screen"})}),P=N(()=>v(v(v({},o),e),a(l))),w=N(()=>{const i=a(f)||a(l).schemas;for(const F of i){const{defaultValue:U}=F;U&&(F.defaultValue=U)}return i}),{handleFormValues:I,initDefault:T}=Le({getProps:l,defaultFormModel:O,getSchema:w,formModel:d}),{handleSubmit:t,validate:p,resetFields:q,getFieldsValue:ne,clearValidate:oe,setFieldsValue:le}=Qe({emit:s,getProps:l,formModel:d,getSchema:w,formElRef:r,defaultFormModel:O,loadingSub:_,handleFormValues:I});function se(){n.value=!n.value}function ae(i){return C(this,null,function*(){g.value=we(a(g)||{},i)})}const ue={getFieldsValue:ne,setFieldsValue:le,resetFields:q,validate:p,clearValidate:oe,setProps:ae,submit:t};return ge(()=>w.value,i=>{a(k)||i!=null&&i.length&&(T(),k.value=!0)}),be(()=>{T(),s("register",ue)}),{formElRef:r,formModel:d,getGrid:y,getProps:l,getBindValue:P,getSchema:w,getSubmitBtnOptions:M,getResetBtnOptions:D,handleSubmit:t,resetFields:q,loadingSub:_,isInline:b,getComponentProps:E,unfoldToggle:se}}});function Xe(e,s,o,O,d,g){const f=$("QuestionCircleOutlined"),r=Pe,n=Fe,_=Se,k=Ce,M=he,D=Ne,E=Ve,l=je,b=Me,y=De,P=$("DownOutlined"),w=$("UpOutlined"),I=Ee,T=Ue;return c(),m(T,z(e.getBindValue,{model:e.formModel,ref:"formElRef"}),{default:u(()=>[B(I,Oe(ke(e.getGrid)),{default:u(()=>[(c(!0),G(L,null,Q(e.getSchema,t=>(c(),m(b,z(t.giProps,{key:t.field}),{default:u(()=>[B(l,{label:t.label,path:t.field},ve({default:u(()=>[t.slot?x(e.$slots,t.slot,{key:0,model:e.formModel,field:t.field,value:e.formModel[t.field]},void 0,!0):t.component==="NCheckbox"?(c(),m(M,{key:1,value:e.formModel[t.field],"onUpdate:value":p=>e.formModel[t.field]=p},{default:u(()=>[B(k,null,{default:u(()=>[(c(!0),G(L,null,Q(t.componentProps.options,p=>(c(),m(_,{key:p.value,value:p.value,label:p.label},null,8,["value","label"]))),128))]),_:2},1024)]),_:2},1032,["value","onUpdate:value"])):t.component==="NRadioGroup"?(c(),m(E,{key:2,value:e.formModel[t.field],"onUpdate:value":p=>e.formModel[t.field]=p},{default:u(()=>[B(k,null,{default:u(()=>[(c(!0),G(L,null,Q(t.componentProps.options,p=>(c(),m(D,{key:p.value,value:p.value},{default:u(()=>[V(j(p.label),1)]),_:2},1032,["value"]))),128))]),_:2},1024)]),_:2},1032,["value","onUpdate:value"])):(c(),m(Be(t.component),z({key:3},e.getComponentProps(t),{value:e.formModel[t.field],"onUpdate:value":p=>e.formModel[t.field]=p,class:{isFull:t.isFull!=!1&&e.getProps.isFull}}),null,16,["value","onUpdate:value","class"])),t.suffix?x(e.$slots,t.suffix,{key:4,model:e.formModel,field:t.field,value:e.formModel[t.field]},void 0,!0):R("",!0)]),_:2},[t.labelMessage?{name:"label",fn:u(()=>[V(j(t.label)+" ",1),B(n,{trigger:"hover",style:Z(t.labelMessageStyle)},{trigger:u(()=>[B(r,{size:"18",class:"cursor-pointer text-gray-400"},{default:u(()=>[B(f)]),_:1})]),default:u(()=>[V(" "+j(t.labelMessage),1)]),_:2},1032,["style"])])}:void 0]),1032,["label","path"])]),_:2},1040))),128)),e.getProps.showActionButtonGroup?(c(),m(b,{key:0,span:e.isInline?"":24,suffix:!!e.isInline},{default:u(({overflow:t})=>[B(k,{align:"center",justify:e.isInline?"end":"start",style:Z({"margin-left":`${e.isInline?12:e.getProps.labelWidth}px`})},{default:u(()=>[e.getProps.showSubmitButton?(c(),m(y,z({key:0},e.getSubmitBtnOptions,{onClick:e.handleSubmit,loading:e.loadingSub}),{default:u(()=>[V(j(e.getProps.submitButtonText),1)]),_:1},16,["onClick","loading"])):R("",!0),e.getProps.showResetButton?(c(),m(y,z({key:1},e.getResetBtnOptions,{onClick:e.resetFields}),{default:u(()=>[V(j(e.getProps.resetButtonText),1)]),_:1},16,["onClick"])):R("",!0),e.isInline&&e.getProps.showAdvancedButton?(c(),m(y,{key:2,type:"primary",text:"","icon-placement":"right",onClick:e.unfoldToggle},{icon:u(()=>[t?(c(),m(r,{key:0,size:"14",class:"unfold-icon"},{default:u(()=>[B(P)]),_:1})):(c(),m(r,{key:1,size:"14",class:"unfold-icon"},{default:u(()=>[B(w)]),_:1}))]),default:u(()=>[V(" "+j(t?"\u5C55\u5F00":"\u6536\u8D77"),1)]),_:2},1032,["onClick"])):R("",!0)]),_:2},1032,["justify","style"])]),_:1},8,["span","suffix"])):R("",!0)]),_:3},16)]),_:3},16,["model"])}var Ze=ye(qe,[["render",Xe],["__scopeId","data-v-676ce85c"]]);export{Ze as B};
